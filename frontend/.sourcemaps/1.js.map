{"version":3,"sources":["../../src/pages/registerPet/registerPet.module.ts","../../src/pages/registerPet/registerPet.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { RegisterPetPage } from './registerPet';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    RegisterPetPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(RegisterPetPage),\r\n  ],\r\n})\r\nexport class RegisterPetPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/registerPet/registerPet.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, AlertController, Alert } from 'ionic-angular';\r\nimport { AngularFireAuth } from \"angularfire2/auth\";\r\nimport { AngularFireDatabase} from 'angularfire2/database';\r\nimport {PetInfo } from \"../../model/pet\";\r\nimport { OwnerHomePage } from \"../home/ownerHome/ownerHome\";\r\nimport {ProfilePage} from \"../profile/profile\";\r\nimport { FormGroup ,FormBuilder,Validators} from \"@angular/forms\";\r\nimport { RequestOptions, Http, Headers } from \"@angular/http\";\r\n/**\r\n * Generated class for the RegisterPage page.\r\n *\r\n * See http://ionicframework.com/docs/components/#navigation for more info\r\n * on Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-registerPet',\r\n  templateUrl: 'registerPet.html',\r\n})\r\nexport class RegisterPetPage {\r\n  [x: string]: any;\r\n  private apiUrl = 'http://115.146.86.193:8080/';\r\n  petInfo = {} as PetInfo;\r\n  loading; registerForm: FormGroup;\r\n\r\n\r\n  constructor(private afAuth: AngularFireAuth,\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    private alertCtrl: AlertController,\r\n    private db :AngularFireDatabase,\r\n    private builder: FormBuilder,\r\n    private http: Http) {\r\n      this.registerForm = builder.group({\r\n        'petname': ['',Validators.required],\r\n        'animalType': ['',Validators.required],\r\n        'dob': ['',Validators.required],\r\n        'breed':['',Validators.required],\r\n      })\r\n  }\r\n  private userid = \"\";\r\n  ionViewDidLoad() {\r\n    this.userid = this.navParams.get(\"uid\");\r\n  }\r\n\r\n  async register() {\r\n    if(this.validate()){\r\n      console.log(\"validated on register\");\r\n      console.log(this.userid+\": getting user id from pet register page.\");\r\n      this.postRequest(this.petInfo,this.userid)\r\n      console.log(\"finished post.\")\r\n      this.navCtrl.push(ProfilePage);\r\n    }\r\n  }\r\n\r\n  validate(): boolean{\r\n    // figure out the error message\r\n    let errorMsg = '';\r\n\r\n        // validate each field\r\n    let control = this.registerForm.controls['petname'];\r\n\r\n    control = this.registerForm.controls['petname'];\r\n    if (!control.valid) {\r\n      if (control.errors['required']) {\r\n          errorMsg = 'Pet name cannot be empty';\r\n      }\r\n      this.createAlert(errorMsg);\r\n      return false;\r\n     }\r\n\r\n     control = this.registerForm.controls['breed'];\r\n     if (!control.valid) {\r\n       if (control.errors['required']) {\r\n           errorMsg = 'Breed cannot be empty. Enter \"No\" if not sure.';\r\n       }\r\n       this.createAlert(errorMsg);\r\n       return false;\r\n      }\r\n\r\n     control = this.registerForm.controls['animalType'];\r\n     if (!control.valid) {\r\n       if (control.errors['required']) {\r\n           errorMsg = 'Animal cannot be empty';\r\n       }\r\n       this.createAlert(errorMsg);\r\n       return false;\r\n      }\r\n\r\n      control = this.registerForm.controls['dob'];\r\n      if (!control.valid) {\r\n        if (control.errors['required']) {\r\n            errorMsg = 'Date of birth cannot be empty';\r\n        }\r\n        this.createAlert(errorMsg);\r\n        return false;\r\n       }\r\n\r\n\r\n    return true;\r\n\r\n  }\r\n\r\n  createAlert(msg : string){\r\n    let alert = this.alertCtrl.create({\r\n      message :msg,\r\n      buttons: ['OK']\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  postRequest(info : PetInfo, id: string ){\r\n    var headers = new Headers();\r\n    headers.append('Content-Type','application/json');\r\n\r\n    var body = JSON.stringify({\r\n      userId: this.userid,\r\n      petname : info.petName,\r\n      animalType: info.animalType,\r\n      dob : info.dob,\r\n      breed: info.animalBreed,\r\n    });\r\n\r\n    this.afAuth.auth.currentUser.getToken(true)\r\n    .then(token =>{\r\n      var param = \"token=\"+ token;\r\n      let options = new RequestOptions({headers: headers,params:param});\r\n      var url =  this.apiUrl + \"postPetProfile\";\r\n\r\n      console.log(\"//////////API Post///////////////////\");\r\n      console.log(\"postParams+ = \"+param);\r\n      console.log(\"body = \"+ body);\r\n      console.log(\"url = \"+ url);\r\n      console.log(this.http.post(url ,body , options));\r\n      var promise = this.http.post(url ,body , options);\r\n    });\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/registerPet/registerPet.ts"],"sourceRoot":""}