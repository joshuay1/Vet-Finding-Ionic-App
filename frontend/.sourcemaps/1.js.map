{"version":3,"sources":["../../src/pages/registerPet/registerPet.module.ts","../../src/pages/registerPet/registerPet.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { RegisterPetPage } from './registerPet';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    RegisterPetPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(RegisterPetPage),\r\n  ],\r\n})\r\nexport class RegisterPetPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/registerPet/registerPet.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, Alert } from 'ionic-angular';\nimport { AngularFireAuth } from \"angularfire2/auth\";\nimport { AngularFireDatabase} from 'angularfire2/database';\nimport {PetInfo } from \"../../model/pet\";\nimport { OwnerHomePage } from \"../home/ownerHome/ownerHome\";\nimport {ProfilePage} from \"../profile/profile\";\nimport { FormGroup ,FormBuilder,Validators} from \"@angular/forms\";\nimport { RequestOptions, Http, Headers } from \"@angular/http\";\n/**\n * Generated class for the RegisterPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-registerPet',\n  templateUrl: 'registerPet.html',\n})\nexport class RegisterPetPage {\n  [x: string]: any;\n  private apiUrl = 'http://115.146.86.193:8080/';\n  petInfo = {} as PetInfo;\n  loading; registerForm: FormGroup;\n\n\n  constructor(private afAuth: AngularFireAuth,\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private alertCtrl: AlertController,\n    private db :AngularFireDatabase,\n    private builder: FormBuilder,\n    private http: Http) {\n      this.registerForm = builder.group({\n        'petname': ['',Validators.required],\n        'animalType': ['',Validators.required],\n        'dob': ['',Validators.required],\n        'breed':['',Validators.required],\n      })\n  }\n  private userid = \"\";\n  ionViewDidLoad() {\n    this.userid = this.navParams.get(\"uid\");\n  }\n\n  async register() {\n    if(this.validate()){\n      console.log(\"validated on register\");\n      console.log(this.userid+\": getting user id from pet register page.\");\n      this.postRequest(this.petInfo,this.userid)\n      console.log(\"finished post.\")\n      this.navCtrl.push(ProfilePage);\n    }\n  }\n\n  validate(): boolean{\n    // figure out the error message\n    let errorMsg = '';\n\n        // validate each field\n    let control = this.registerForm.controls['petname'];\n\n    control = this.registerForm.controls['petname'];\n    if (!control.valid) {\n      if (control.errors['required']) {\n          errorMsg = 'Pet name cannot be empty';\n      }\n      this.createAlert(errorMsg);\n      return false;\n     }\n\n     control = this.registerForm.controls['breed'];\n     if (!control.valid) {\n       if (control.errors['required']) {\n           errorMsg = 'Breed cannot be empty. Enter \"No\" if not sure.';\n       }\n       this.createAlert(errorMsg);\n       return false;\n      }\n\n     control = this.registerForm.controls['animalType'];\n     if (!control.valid) {\n       if (control.errors['required']) {\n           errorMsg = 'Animal cannot be empty';\n       }\n       this.createAlert(errorMsg);\n       return false;\n      }\n\n      control = this.registerForm.controls['dob'];\n      if (!control.valid) {\n        if (control.errors['required']) {\n            errorMsg = 'Date of birth cannot be empty';\n        }\n        this.createAlert(errorMsg);\n        return false;\n       }\n\n\n    return true;\n\n  }\n\n  createAlert(msg : string){\n    let alert = this.alertCtrl.create({\n      message :msg,\n      buttons: ['OK']\n    });\n    alert.present();\n  }\n\n  postRequest(info : PetInfo, id: string ){\n    var headers = new Headers();\n    headers.append('Content-Type','application/json');\n\n    var body = JSON.stringify({\n      userId: this.userid,\n      petname : info.petName,\n      animalType: info.animaltype,\n      dob : info.dob,\n      breed: info.breed,\n    });\n\n    this.afAuth.auth.currentUser.getToken(true)\n    .then(token =>{\n      var param = \"token=\"+ token;\n      let options = new RequestOptions({headers: headers,params:param});\n      var url =  this.apiUrl + \"postPetProfile\";\n\n      console.log(\"//////////API Post///////////////////\");\n      console.log(\"postParams+ = \"+param);\n      console.log(\"body = \"+ body);\n      console.log(\"url = \"+ url);\n      console.log(this.http.post(url ,body , options));\n      var promise = this.http.post(url ,body , options);\n    });\n\n\n  }\n\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/registerPet/registerPet.ts"],"sourceRoot":""}