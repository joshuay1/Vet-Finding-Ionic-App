{"version":3,"sources":["../../src/pages/register/registerOwner/register.module.ts","../../src/pages/register/registerOwner/register.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { RegisterOwnerPage } from './register';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    RegisterOwnerPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(RegisterOwnerPage),\r\n  ],\r\n})\r\nexport class RegisterPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register/registerOwner/register.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, AlertController, Alert } from 'ionic-angular';\r\nimport { AngularFireAuth } from \"angularfire2/auth\";\r\nimport { AngularFireDatabase} from 'angularfire2/database';\r\nimport { User, UserInfo } from \"../../../model/user\";\r\nimport { OwnerHomePage } from \"../../home/ownerHome/ownerHome\";\r\nimport { FormGroup ,FormBuilder,Validators} from \"@angular/forms\";\r\nimport { RequestOptions, Http, Headers } from \"@angular/http\";\r\nimport { RedirectPage } from \"../../redirect/redirect\"\r\nimport { HttpServiceProvider } from \"../../../providers/http-service/http-service\";\r\n/**\r\n * Generated class for the RegisterPage page.\r\n *\r\n * See http://ionicframework.com/docs/components/#navigation for more info\r\n * on Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-register',\r\n  templateUrl: 'register.html',\r\n})\r\nexport class RegisterOwnerPage {\r\n  [x: string]: any;\r\n  private apiUrl = 'http://115.146.86.193:8080/';\r\n  user = {} as User;\r\n  userInfo = {} as UserInfo;\r\n  loading; registerForm: FormGroup;\r\n\r\n\r\n  constructor(private afAuth: AngularFireAuth,\r\n    public navCtrl: NavController, \r\n    public navParams: NavParams,\r\n    private alertCtrl: AlertController,\r\n    private db :AngularFireDatabase,\r\n    private builder: FormBuilder,\r\n    private http: Http,\r\n    private httpProviders: HttpServiceProvider) {\r\n      this.registerForm = builder.group({\r\n        'email' : ['',Validators.compose([Validators.required,Validators.minLength(5),Validators.email])],\r\n        'password':['',Validators.compose([Validators.required,Validators.minLength(8)])],\r\n        'repassword':['',Validators.compose([Validators.required,Validators.minLength(8)])],\r\n        'auth':[],\r\n        'first-name': ['',Validators.required],\r\n        'last-name': ['',Validators.required],\r\n        'dob': ['',Validators.required],\r\n        'streetname':['',Validators.required],\r\n        'streetnumber':['',Validators.required],\r\n        'suburb':['',Validators.required],\r\n        'state':['',Validators.required],\r\n        'postcode':['',Validators.required],\r\n        'country': ['',Validators.required]\r\n      })\r\n      this.userInfo.userType = navParams.get('UserType');\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad RegisterPage');\r\n  }\r\n\r\n  async register(user: User) {\r\n    if(this.validate()){\r\n      this.afAuth.auth.createUserWithEmailAndPassword(user.email,user.password)\r\n      .then(auth =>{\r\n          console.log(this.userInfo.authkey);\r\n\r\n/*        if(this.userInfo.authkey){\r\n          this.userInfo.userType = \"Vet\";\r\n          this.userInfo.authkey = null;\r\n        }else{\r\n          this.userInfo.userType = \"User\";\r\n          this.userInfo.authkey = null;\r\n        }*/\r\n        console.log(this.userInfo.userType);\r\n\r\n        this.registerValidation();\r\n        \r\n        //this.db.object(`users/${auth.uid}`).set(this.userInfo);\r\n\r\n\r\n\r\n       \r\n\r\n       // this.navCtrl.setRoot(OwnerHomePage);\r\n\r\n      })\r\n      .catch(err =>{\r\n        // Handle error\r\n        let alert = this.alertCtrl.create({\r\n        title: 'Error',\r\n        message: err.message,\r\n        buttons: ['OK']\r\n      });\r\n        alert.present();\r\n      })\r\n    }\r\n\r\n  \r\n  }\r\n\r\n  validate(): boolean{\r\n    // figure out the error message\r\n    let errorMsg = '';\r\n    \r\n        // validate each field\r\n    let control = this.registerForm.controls['email'];\r\n    if (!control.valid) {\r\n      if (control.errors['required']) {\r\n          errorMsg = 'Email cannot be empty';\r\n      } else if (control.errors['minlength']) {\r\n          errorMsg = 'Email must at least be 5 characters';\r\n     } else if (control.errors['email']){\r\n       errorMsg = \"Not a valid email format\";\r\n     }\r\n     this.createAlert(errorMsg);\r\n     return false;\r\n    }\r\n\r\n    control = this.registerForm.controls['password'];\r\n    if (!control.valid) {\r\n      if (control.errors['required']) {\r\n          errorMsg = 'Password cannot be empty';\r\n      } else if (control.errors['minlength']) {\r\n          errorMsg = 'Password must have at least 8 characters';\r\n     }\r\n     this.createAlert(errorMsg);\r\n     return false;\r\n    }\r\n\r\n    control = this.registerForm.controls['first-name'];\r\n    if (!control.valid) {\r\n      if (control.errors['required']) {\r\n          errorMsg = 'First name cannot be empty';\r\n      }\r\n      this.createAlert(errorMsg);\r\n      return false;\r\n     }\r\n\r\n     control = this.registerForm.controls['auth'];\r\n     if (!control.valid) {\r\n       errorMsg = \"auth error\";\r\n       this.createAlert(errorMsg);\r\n       return false;\r\n      }\r\n\r\n     control = this.registerForm.controls['last-name'];\r\n     if (!control.valid) {\r\n       if (control.errors['required']) {\r\n           errorMsg = 'Last name cannot be empty';\r\n       }\r\n       this.createAlert(errorMsg);\r\n       return false;\r\n      }\r\n\r\n      control = this.registerForm.controls['dob'];\r\n      if (!control.valid) {\r\n        if (control.errors['required']) {\r\n            errorMsg = 'Date cannot be empty';\r\n        }\r\n        this.createAlert(errorMsg);\r\n        return false;\r\n       }\r\n\r\n\r\n    return true;\r\n\r\n  }\r\n\r\n  createAlert(msg : string){\r\n    let alert = this.alertCtrl.create({\r\n      message :msg,\r\n      buttons: ['OK']\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  async registerValidation() {\r\n          this.userInfo.userid = this.afAuth.auth.currentUser.uid;\r\n          this.httpProviders.httpPost(this.apiUrl + \"postProfile\", JSON.stringify(this.userInfo))\r\n              .then(result => {\r\n                  console.log(\"get result here\");\r\n                  var res = result.response;\r\n                  if (res == \"success\") {\r\n                      this.navCtrl.push(RedirectPage, { userType: this.userInfo.userType });\r\n                  }\r\n              }).catch(err => {\r\n                  console.log(\"catching error here\");\r\n                  let alert = this.alertCtrl.create({\r\n                      title: 'Error',\r\n                      message: err,\r\n                      buttons: ['OK']\r\n                  });                 alert.present();\r\n              })\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register/registerOwner/register.ts"],"sourceRoot":""}